<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>検索画面</title>
  <link rel="stylesheet" href="../static/css/search.css">
</head>

<body>

  <header class="c_hd">
    <form th:action="@{/search}" method="get" class="c_hd_form">
      <div class="c_hd_left">
        <a href="home.html">
          <img src="../static/images/icon.png" alt="ホームアイコン" class="home-icon">
        </a>
        <div class="c_hd_ttl">
          <input type="search" id="titleSearch" name="title" class="search" placeholder="タイトルを検索..." th:value="${searchTitle}">
          <button type="submit" class="search-btn">
            <img src="../static/images/Magnifying glass.png" alt="検索" class="search-icon-img">
          </button>
        </div>
      </div>

      <div class="c_hd_right">
        <select id="categorySelect" name="category" class="select">
          <option value="">カテゴリー検索</option>
          <option value="ファンタジー" th:selected="${searchCategory == 'ファンタジー'}">ファンタジー</option>
          <option value="ミステリー" th:selected="${searchCategory == 'ミステリー'}">ミステリー</option>
          <option value="ノンフィクション" th:selected="${searchCategory == 'ノンフィクション'}">ノンフィクション</option>
          <option value="ホラー" th:selected="${searchCategory == 'ホラー'}">ホラー</option>
          <option value="専門書" th:selected="${searchCategory == '専門書'}">専門書</option>
          <option value="SF" th:selected="${searchCategory == 'SF'}">SF</option>
          <option value="恋愛" th:selected="${searchCategory == '恋愛'}">恋愛</option>
          <option value="児童書" th:selected="${searchCategory == '児童書'}">児童書</option>
          <option value="えほん" th:selected="${searchCategory == 'えほん'}">えほん</option>
          <option value="自己啓発本" th:selected="${searchCategory == '自己啓発本'}">自己啓発本</option>
        </select>
        <a href="search.html" class="reload-btn">
          <img src="../static/images/Magnifying glass.png" alt="再読み込み" class="reload-icon-img">
        </a>
      </div>
    </form>
  </header>

  <main class="c_main">
    <div class="u_inner">
      <section class="count">
        <header class="count_hd">
          <h1 class="count_hd_ttl"><span th:text="${books.size()}">0</span> 件ヒット</h1>
        </header>

        <div class="count_body" th:each="book : ${books}">
          <div class="count_wrap">
            <a th:href="@{/bdetail(id=${book.id})}" class="count_cnt">
              <img th:src="@{${book.imagePath}}" th:alt="${book.title}">
              <div class="book">
                <div class="book_ttl">
                  <h2>タイトル：</h2>
                  <h2 th:text="${book.title}">本のタイトル</h2>
                </div>
                <div class="book_about">
                  <h3>あらすじ：</h3>
                  <p>
                    <span th:text="${book.synopsis}">
                        著者の情報やあらすじがここに表示されます。
                    </span>
                  </p>
                </div>
              </div>
              <div class="book_lend">
                <h2 th:class="${book.available} ? 'book_lend_ttl available' : 'book_lend_ttl unavailable'" 
                    th:text="${book.available} ? '貸出可' : '貸出不可'">貸出可/貸出不可</h2>
              </div>
            </a>
          </div>
        </div>
        <div th:if="${books.empty}">
            <p>検索条件に一致する本は見つかりませんでした。</p>
        </div>

      </section>
    </div>
  </main>

  </body>
</html>
